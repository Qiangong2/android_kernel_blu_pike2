#include "../sleep/slp_mgr.h"
#include "mem_pd_mgr.h"
#include "rdc_debug.h"

#define CP_START_ADDR		0x40500000
#define CP_RESET_REG		0x40088288
#define CP_SDIO_PRIORITY_ADDR 0x40130150

/* set sdio higher priority to visit iram */
#define M6_TO_S0_HIGH_PRIORITY 0X80000000

#define PACKET_SIZE		(32*1024)
/* time out in waiting wifi to come up */
#define POWERUP_WAIT_MS	30000000
#define POWERUP_DELAY		200
#define RESET_DELAY		1

#define FIRMWARE_MAX_SIZE 0xf0c00
#define WIFI_REG 0x60300004
#define CHIPID_REG 0x603003fc
#define CALI_REG 0x70040000
#define CALI_OFSET_REG 0x70040010
#define MARLIN2_AA_CHIPID 0x23490000
#define MARLIN2_AB_CHIPID 0x23490001

#define CARD_DETECT_WAIT_MS	18000
#define DCACHE_CMD_ISSUE_START 0X80000000
#define DCACHE_CMD_CLEAN_ALL 0X00000000
#define DCACHE_CMD_CLEAN_INVALID_ALL 0X00000008
#define DCACHE_REG_BASE 0X401E0000
#define DCACHE_CFG0 (DCACHE_REG_BASE + 0X0040)
#define DCACHE_CMD_CFG2 (DCACHE_REG_BASE + 0X0058)
#define DCACHE_INT_RAW_STS (DCACHE_REG_BASE + 0X0064)
#define DCACHE_INT_CLR (DCACHE_REG_BASE + 0X006C)
#define DCACHE_CMD_IRQ_CLR 0X00000001
#define DCACHE_CMD_CFG2_MASK 0X8000003F
#define DCACHE_DEBUG_EN 0X80000000
#define DCACHE_SIZE_32K 0X3
#define DCACHE_SIZE_SEL_MASK 0X30000000

#define DUMP_PACKET_SIZE		(32 * 1024)
#define DUMP_SDIO_ADDR			(0x40140000)
#define DUMP_SDIO_ADDR_SIZE		(0x10000)
/* for wifi */
#define DUMP_WIFI_AON_MAC_ADDR			(0x400f0000)
#define DUMP_WIFI_AON_MAC_ADDR_SIZE		(0x108)
#define DUMP_WIFI_RTN_PD_MAC_ADDR		(0x400f1000)
#define DUMP_WIFI_RTN_PD_MAC_ADDR_SIZE		(0xD100)
#define DUMP_WIFI_352K_RAM_ADDR			(0x40300000)
#define DUMP_WIFI_352K_RAM_ADDR_SIZE		(0x58000)
#define CHIP_SLP				(0X4083C00C)
#define WIFI_WRAP_PWRON				(1 << 14)
#define WIFI_PHY_PWRON				(1 << 15)
#define WIFI_MAC_PWRON				(1 << 16)
#define WIFI_ALL_PWRON	(WIFI_PHY_PWRON | WIFI_MAC_PWRON | WIFI_WRAP_PWRON)
#define PD_WIFI_AON_CFG4			(0x4083c088)
#define PD_WIFI_MAC_AON_CFG4			(0X4083C0A8)
#define PD_WIFI_PHY_AON_CFG4			(0x4083C0B8)
#define WIFI_WRAP_PWR_DOWN			(1 << 1)
#define WIFI_MAC_PWR_DOWN			(1 << 2)
#define WIFI_PHY_PWR_DOWN			(1 << 2)
#define WIFI_ENABLE				(0x40130004)
#define WIFI_EN					(1 << 5)
#define WIFI_MAC_EN				(1 << 9)
#define WIFI_ALL_EN		(WIFI_EN | WIFI_MAC_EN)


#define DUMP_BT_ADDR			(0X50040000)
#define DUMP_BT_ADDR_SIZE		(0xa400)
/* for fm */
#define DUMP_FM_ADDR			(0x40980000)
#define DUMP_FM_ADDR_SIZE		(0x238)
#define DUMP_FM_RDS_ADDR		(0x40980800)
#define DUMP_FM_RDS_ADDR_SIZE		(0x4c)

#define DUMP_INTC_ADDR			(0X40010000)
#define DUMP_SYSTIMER_ADDR		(0X40020000)
/* need check, not need to dump it */
#define DUMP_WDG_ADDR			0
#define DUMP_WIFI_ADDR			0
#define DUMP_WIFI_ADDR_SIZE		0
#define DUMP_BT_CMD_ADDR		0
#define DUMP_BT_CMD_ADDR_SIZE	0


#define DUMP_APB_ADDR			(0X40060000)
#define DUMP_DMA_ADDR			(0X60020000)
#define DUMP_AHB_ADDR			(0X60030000)
#define DUMP_REG_SIZE			(0X10000)

#define SMP_HEADERFLAG 0X7E7E7E7E
#define SMP_RESERVEDFLAG 0X5A5A
#define SMP_DSP_CHANNEL_NUM 0X88
#define SMP_DSP_TYPE 0X9D
#define SMP_DSP_DUMP_TYPE 0X32

#define SYSNC_CODE_LEN 0X4
#define CHKSUM_LEN 0X2
#define ARMLOG_HEAD 9

/* For GNSS */
#define GNSS_CP_START_ADDR	0x40A20000
#define GNSS_CP_RESET_REG	0x40BC8280
#define GNSS_FIRMWARE_MAX_SIZE 0x58000
#define GNSS_CHIPID_REG 0x603003fc

/* For MARLIN3 DCACHE */
#define DCACHE_CMD_ISSUE_START 0X80000000
#define DCACHE_CMD_CLEAN_ALL 0X00000000
#define DCACHE_CMD_CLEAN_INVALID_ALL 0X00000008
#define DCACHE_REG_BASE 0X401E0000
#define DCACHE_CFG0 (DCACHE_REG_BASE + 0X0040)
#define DCACHE_CMD_CFG2 (DCACHE_REG_BASE + 0X0058)
#define DCACHE_INT_RAW_STS (DCACHE_REG_BASE + 0X0064)
#define DCACHE_INT_CLR (DCACHE_REG_BASE + 0X006C)
#define DCACHE_CMD_IRQ_CLR 0X00000001
#define DCACHE_CMD_CFG2_MASK 0X8000003F
#define DCACHE_DEBUG_EN 0X80000000
#define DCACHE_SIZE_32K 0X3
#define DCACHE_SIZE_SEL_MASK 0X30000000


/* For MARLIN3 MEM PD  */
#define CTL_BASE_AON_APB 0X4083C000
#define REG_AON_APB_CHIP_MEM_AUTO_EN (CTL_BASE_AON_APB + 0X0198)
#define REG_AON_APB_BTWF_MEM_CGG1 (CTL_BASE_AON_APB + 0X010C)
/* SHUTDOWN IRAM [0...15]*32K=512K,FORCE SHUTDOWN IRAM [16...31]*32K=512K */
#define REG_AON_APB_BTWF_MEM_CGG2 (CTL_BASE_AON_APB + 0X0110)
/* RETENTION IRAM [0...15]*32K=512K,FORCE RETENTION IRAM [16...31]*32K=512K */
#define REG_AON_APB_BTWF_MEM_CGG3 (CTL_BASE_AON_APB + 0X0114)
/* SHUTDOWN IRAM [0...13]*32K=448K,[14]mean 3k; */
#define REG_AON_APB_BTWF_MEM_CGG4 (CTL_BASE_AON_APB + 0X0118)


/* for dump arm register */
#define AON_APB_BASE_ADDR 0X4083C000

#define ARM_DAP_BASE_ADDR 0X4085C000
#define ARM_DAP_REG1 0X4085C000
#define ARM_DAP_REG2 0X4085C004
#define ARM_DAP_REG3 0X4085C00C

#define BTWF_STATUS_REG 0x4085c0fc
#define BTWF_OK_VALUE 0x24770011
#define GNSS_OK 0x408600fc

#define DJTAG_DAP_SEL (AON_APB_BASE_ADDR + 0X0064)
#define APB_RST (AON_APB_BASE_ADDR + 0x0000)
#define APB_EB  (AON_APB_BASE_ADDR + 0x0024)
#define CM4_DAP_SEL_BTWF 0X00000001	/* bit0 */
#define CM4_DAP_SEL_GNSS 0X00000002	/* bit1 */
#define CM4_DAP0_SOFT_RST 0X10000000	/* BIT28 */
#define CM4_DAP1_SOFT_RST 0X20000000	/* BIT29 */
#define CM4_DAP0_EB 0X40000000	/* BIT30 */
#define CM4_DAP1_EB 0X80000000	/* BIT31 */

